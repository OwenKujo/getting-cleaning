from pythainlp.tokenize import word_tokenize
from meanings_data import (
    meanings_money, meanings_work, meanings_animal, meanings_activities,
    meanings_good_bad, meanigs_right_left, meanings_general, meanings_love
)
def Dream_Prediction(time_str, topic):
    try:
        hour = int(time_str.split()[1].split(":")[0])
    except Exception:
        return "‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÑ‡∏î‡πâ"

    if 7 < hour < 19:
        time_msg = "‡∏ù‡∏±‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ\n‚û° ‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏à‡∏¥‡∏ô‡∏ï‡∏ô‡∏≤‡∏Å‡∏≤‡∏£"
    elif 19 <= hour < 23:
        time_msg = "‡∏ù‡∏±‡∏ô‡∏´‡∏±‡∏ß‡∏Ñ‡πà‡∏≥: ‡∏•‡∏≤‡∏á‡∏ö‡∏≠‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ñ‡∏∂‡∏á‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏≤‡∏á‡πÑ‡∏Å‡∏•"
    elif hour >= 23 or hour < 3:
        time_msg = "‡∏ù‡∏±‡∏ô‡∏¢‡∏≤‡∏°‡∏î‡∏∂‡∏Å: ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß"
    elif 3 <= hour < 7:
        time_msg = "‡∏ù‡∏±‡∏ô‡∏¢‡∏≤‡∏°‡πÄ‡∏ä‡πâ‡∏≤: ‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏ô‡πÉ‡∏Å‡∏•‡πâ"
    else:
        time_msg = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô"

    topic_msg = {
        '1': "‡∏´‡∏°‡∏ß‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô",
        '2': "‡∏´‡∏°‡∏ß‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å",
        '3': "‡∏´‡∏°‡∏ß‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô",
        '4': "‡∏´‡∏°‡∏ß‡∏î‡∏™‡∏±‡∏ï‡∏ß‡πå",
        '5': "‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
        '6': "‡∏´‡∏°‡∏ß‡∏î‡∏ó‡πç‡∏©‡∏ô‡∏≤‡∏¢‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏¢",
        '7': "‡∏´‡∏°‡∏ß‡∏î‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Ç‡∏ß‡∏≤‡∏£‡πâ‡∏≤‡∏¢ ‡∏ã‡πâ‡∏≤‡∏¢‡∏î‡∏µ",
        '8': "‡∏´‡∏°‡∏ß‡∏î‡∏ó‡∏±‡πâ‡πà‡∏ß‡πÑ‡∏õ",
    }.get(str(topic), "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢")

    return f"{time_msg}\n{topic_msg}"
# ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ù‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≤‡∏á‡πÜ
def find_dream_meaning(text, topic):
    tokens = word_tokenize(text, engine='newmm')
    if topic == '1':
        meanings = meanings_money
    elif topic == '2':
        meanings = meanings_love
    elif topic == '3':
        meanings = meanings_work
    elif topic == '4':
        meanings = meanings_animal
    elif topic == '5':
        meanings = meanings_activities
    elif topic == '6':
        meanings = meanings_good_bad    
    elif topic == '7':
        meanings = meanigs_right_left
    elif topic == '8':
        meanings = meanings_general
    else:
        return "‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á"

    for word in tokens:
        if word in meanings:
            meaning, numbers = meanings[word]
            return f"üîç ‡∏ù‡∏±‡∏ô‡∏ñ‡∏∂‡∏á '{word}'\nüí° ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢: {meaning}\nüî¢ ‡πÄ‡∏•‡∏Ç‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ: {' '.join(numbers)}"
    return "‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"


# ‡∏£‡∏±‡∏ö input ‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
user_text = input("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô: ")
user_time = input("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ù‡∏±‡∏ô (‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö YYYY-MM-DD HH:MM:SS): ")
user_topic = input("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (1=‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô, 2=‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏Å, 3=‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô, 4=‡∏™‡∏±‡∏ï‡∏ß‡πå, 5=‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ, 6=‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏µ/‡∏£‡πâ‡∏≤‡∏¢, 7=‡∏Ç‡∏ß‡∏≤‡∏£‡πâ‡∏≤‡∏¢‡∏ã‡πâ‡∏≤‡∏¢‡∏î‡∏µ, 8=‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ): ")

# ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
print("\nüîÆ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ù‡∏±‡∏ô üîÆ")
print(Dream_Prediction(user_time, user_topic))
print(find_dream_meaning(user_text, user_topic))
